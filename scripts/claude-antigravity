#!/usr/bin/env bash
# Claude Code wrapper for Antigravity proxy
#
# This script provides a separate command to use Claude Code with Antigravity proxy,
# while keeping the original 'claude' command untouched.
#
# Usage:
#   claude-antigravity [claude arguments...]
#
# Example:
#   claude-antigravity "explain this code"
#   claude-antigravity --version
#
# Configuration:
#   Set ANTIGRAVITY_BASE_URL in ~/.env (default: http://127.0.0.1:8045)

set -euo pipefail

# Default Antigravity proxy URL
DEFAULT_ANTIGRAVITY_URL="http://127.0.0.1:8045"

# Use ANTIGRAVITY_BASE_URL from environment, or fall back to default
PROXY_URL="${ANTIGRAVITY_BASE_URL:-$DEFAULT_ANTIGRAVITY_URL}"

# Set Antigravity proxy URL for Claude Code
export ANTHROPIC_BASE_URL="$PROXY_URL"

# Forward all arguments to claude
exec claude "$@"

#!/usr/bin/env bash
# Gemini CLI wrapper for Antigravity proxy
#
# This script provides a separate command to use Gemini CLI with Antigravity proxy.
#
# Usage:
#   gemini-antigravity [gemini arguments...]
#
# Example:
#   gemini-antigravity "explain this code"
#   gemini-antigravity -m gemini-2.5-flash "hello"
#   gemini-antigravity -i
#
# Configuration:
#   Set ANTIGRAVITY_BASE_URL in ~/.env (default: http://127.0.0.1:8045)

set -euo pipefail

# Default Antigravity proxy URL
DEFAULT_ANTIGRAVITY_URL="http://127.0.0.1:8045"

# Use ANTIGRAVITY_BASE_URL from environment, or fall back to default
PROXY_URL="${ANTIGRAVITY_BASE_URL:-$DEFAULT_ANTIGRAVITY_URL}"

# Set Antigravity proxy URL for Gemini CLI
export GOOGLE_GEMINI_BASE_URL="$PROXY_URL"

# Forward all arguments to gemini
exec gemini "$@"

# 通用專案開發模板

此模板適用於所有 SYNTEC 嵌入式開發專案，包含通用的開發規範、工作流程和工具使用指南。

## 程式碼標準

### C/C++ 開發規範
- 使用 4 個空格縮排，不使用 Tab
- 函數名稱使用 snake_case 命名
- 變數名稱使用 camelCase 命名  
- 常數使用 UPPER_CASE 命名
- 每行程式碼不超過 100 字元

### 註解規範
```c
/**
 * @brief 函數功能簡述
 * @param param1 參數說明
 * @return 返回值說明
 */
int example_function(int param1);
```

### 檔案結構規範
```
src/
├── include/          # 標頭檔
├── lib/             # 函式庫
├── drivers/         # 驅動程式
├── app/             # 應用程式
└── tests/           # 測試檔案
```

## Git 工作流程

### 分支策略
- `master`: 生產版本
- `develop`: 開發主分支
- `feature/*`: 功能開發分支
- `hotfix/*`: 緊急修復分支

### Commit 訊息格式
```
type(scope): subject

body

footer
```

類型 (type):
- `feat`: 新功能
- `fix`: 修復問題
- `docs`: 文件更新
- `style`: 程式碼格式調整
- `refactor`: 重構
- `test`: 測試相關
- `chore`: 建置工具或輔助工具變動

## 人設系統使用指南

本模板提供多種專業人設，可根據不同任務需求切換：

### 可用人設
- **default**: 一般開發助手，適用於日常開發任務
- **debugger**: 除錯專家，專精於問題診斷和效能分析
- **architect**: 系統架構師，專注於系統設計和技術決策
- **reviewer**: 程式碼審查員，專精於品質控制和最佳實務
- **tester**: 測試專家，專注於測試策略和品質保證

### 人設切換方式
```bash
# 使用 slash command 切換人設
/persona debugger    # 切換為除錯專家
/persona architect   # 切換為系統架構師
/persona reviewer    # 切換為程式碼審查員
/persona tester      # 切換為測試專家
/persona default     # 回到預設人設
```

### 使用情境建議
```markdown
# 除錯問題時
/persona debugger
系統在運行一段時間後記憶體使用率異常增高，請幫我分析原因

# 設計新功能時
/persona architect
我需要為IMX8平台加入新的網路通訊功能，請幫我設計架構

# 程式碼審查時
/persona reviewer
請檢查這段多執行緒程式碼是否有同步問題

# 規劃測試時
/persona tester
請為這個新的驅動程式設計完整的測試策略
```

## MCP 工具使用指南 (學習模式)

### Confluence 知識庫學習

MCP 目前支援搜尋功能，主要用於讓 Claude Code 學習和理解 SYNTEC 的開發環境、規範和流程。

#### 學習專案架構和規範
```
請搜尋 Confluence 中關於 [專案名稱] 的技術架構文件，幫我了解：
1. 專案的整體架構
2. 開發規範和標準
3. 建置和部署流程
4. 測試策略
```

#### 學習硬體平台特性
```
請搜尋 Confluence 中關於 IMX8/AM625 的文件，讓我了解：
1. 硬體規格和特性
2. 開發環境設定
3. 常用的工具和指令
4. 已知問題和解決方案
```

#### 學習 API 和介面規範
```
請搜尋 Confluence 中的 API 文件，幫我理解：
1. 現有的 API 介面
2. 呼叫方式和參數
3. 回傳格式和錯誤處理
4. 使用範例
```

#### 學習開發流程和工作方式
```
請搜尋 Confluence 中關於開發流程的文件，讓我了解：
1. Git 分支策略和命名規則
2. Code Review 流程
3. 測試和品質保證流程
4. 發布和部署流程
```

### JIRA 專案資訊學習

#### 了解專案狀態和進度
```
請搜尋 JIRA 中 [專案名稱] 的相關議題，幫我了解：
1. 目前的開發狀態
2. 優先處理的任務
3. 常見的問題類型
4. 團隊的工作方式
```

#### 學習問題分類和處理方式
```
請搜尋 JIRA 中的 Bug 報告，讓我學習：
1. 常見問題的分類
2. 問題描述的格式
3. 優先級的設定標準
4. 解決方案的記錄方式
```

## 開發流程 (結合 MCP 學習)

### 1. 任務開始階段
1. **學習階段**: 使用 MCP 搜尋相關的 Confluence 技術文件和 JIRA 議題
2. **環境準備**: 根據搜尋結果了解開發環境要求
3. **分支建立**: 建立 feature 分支開始開發

**MCP 學習建議**:
```
在開始新任務前，請搜尋 Confluence 中關於 [任務相關技術] 的文件，
讓我了解現有的實作方式、API 規範和最佳實務。
```

### 2. 開發過程
1. **持續學習**: 開發過程中遇到問題時，使用 MCP 搜尋解決方案
2. **遵循規範**: 根據從 Confluence 學習到的標準撰寫程式
3. **定期提交**: 撰寫清楚的 commit 訊息

**MCP 學習建議**:
```
當遇到技術問題時，請搜尋 Confluence 中的故障排除文件
和 JIRA 中的相似問題，幫我找到解決方案。
```

### 3. 完成階段
1. **品質檢查**: 根據學習到的測試標準進行驗證
2. **文件更新**: 參考現有文件格式更新相關說明
3. **經驗累積**: 將解決的問題和經驗記錄下來

**MCP 學習建議**:
```
請搜尋 Confluence 中的測試指南和文件範本，
確保我的交付品符合團隊標準。
```

## 建置和測試

### 常用指令
```bash
# 建置專案
make clean && make all

# 執行測試
make test

# 程式碼格式檢查
cppcheck --enable=all src/

# 記憶體洩漏檢查
valgrind --leak-check=full ./your_program
```

### 測試策略
- 單元測試：每個函數都應有對應測試
- 整合測試：驗證模組間互動
- 硬體測試：在目標硬體上驗證功能

## 文件管理

### 必要文件
- README.md: 專案概述和建置說明
- CHANGELOG.md: 版本更新記錄
- API.md: API 文件 (如適用)
- TROUBLESHOOTING.md: 常見問題排除

### 文件維護
- 程式碼變更時同步更新文件
- 定期檢查文件的正確性
- 使用 Confluence 管理正式文件

## 品質控制

### Code Review 檢查清單
- [ ] 程式碼遵循命名規範
- [ ] 有適當的錯誤處理
- [ ] 記憶體管理正確
- [ ] 註解清楚且有用
- [ ] 測試覆蓋率足夠

### 發布前檢查
- [ ] 所有測試通過
- [ ] 文件已更新
- [ ] JIRA 任務已關閉
- [ ] Confluence 文件已同步

---

*此模板持續更新，請定期查看最新版本*